# ユビキタス言語定義

本ドキュメントは、開発チーム・ドキュメント・コード上で統一して使う用語を定義する。
同じ概念を複数の名前で呼ばない。コード上の命名もここの英語表記に従う。

---

## ドメイン用語

### クイズ（Quiz）

| 項目 | 内容 |
| --- | --- |
| 日本語 | クイズ |
| 英語（コード） | `Quiz` |
| 定義 | 1問分の問題。問題文・選択肢A・選択肢B・正解・解説で構成される |
| 備考 | 必ず1つのセットに属する。セット未所属のクイズは存在しない |

### クイズセット（QuizSet）

| 項目 | 内容 |
| --- | --- |
| 日本語 | クイズセット / セット |
| 英語（コード） | `QuizSet` |
| 定義 | 複数のクイズをまとめたグループ。タイトルと任意の説明を持つ |
| 備考 | トップ画面ではセット単位でプレイを開始する |

### 選択肢A / 選択肢B（optionA / optionB）

| 項目 | 内容 |
| --- | --- |
| 日本語 | 選択肢A / 選択肢B |
| 英語（コード） | `optionA` / `optionB` |
| 定義 | クイズに対する2つの回答候補。左スワイプが選択肢A、右スワイプが選択肢B |
| 備考 | ランダム配置はしない。作成時に順序を意図して設定する |

### 正解（correctAnswer）

| 項目 | 内容 |
| --- | --- |
| 日本語 | 正解 |
| 英語（コード） | `correctAnswer` |
| 定義 | 選択肢AまたはBのどちらが正解かを示す値（`'A'` または `'B'`） |
| 型 | `type CorrectAnswer = 'A' \| 'B'` |

### 解説（explanation）

| 項目 | 内容 |
| --- | --- |
| 日本語 | 解説 |
| 英語（コード） | `explanation` |
| 定義 | 正解・不正解に関わらず全問終了後にリザルト画面で表示される補足説明 |
| 備考 | 任意項目（省略可） |

### 回答記録（AnswerRecord）

| 項目 | 内容 |
| --- | --- |
| 日本語 | 回答記録 |
| 英語（コード） | `AnswerRecord` |
| 定義 | 1問分の回答結果。プレイセッション中にメモリ上で保持し、リザルト画面で使用する |
| 備考 | localStorageには保存しない揮発データ。クイズオブジェクトをスナップショットとして保持する |

---

## UI/UX用語

### スワイプ（Swipe）

| 項目 | 内容 |
| --- | --- |
| 日本語 | スワイプ |
| 定義 | カードを左右にドラッグして離す操作。閾値を超えると回答が確定する |
| 備考 | 左スワイプ = 選択肢A、右スワイプ = 選択肢B |

### スワイプ閾値（Swipe Threshold）

| 項目 | 内容 |
| --- | --- |
| 日本語 | スワイプ閾値 |
| 英語（コード） | `SWIPE_THRESHOLD` |
| 定義 | 回答を確定させるために必要なドラッグ距離。画面幅の30% |

### スワイプ状態（SwipeState）

| 項目 | 内容 |
| --- | --- |
| 日本語 | スワイプ状態 |
| 英語（コード） | `SwipeState` |
| 定義 | スワイプカードの現在状態を表す列挙型 |
| 値 | `Idle`（待機）/ `Dragging`（ドラッグ中）/ `Feedback`（回答後フィードバック中） |

### カードスタック（CardStack）

| 項目 | 内容 |
| --- | --- |
| 日本語 | カードスタック |
| 英語（コード） | `CardStack` |
| 定義 | 複数の問題カードが奥から重なって積まれた表示。次の問題が背後に見える |

### フィードバック（Feedback）

| 項目 | 内容 |
| --- | --- |
| 日本語 | フィードバック |
| 定義 | 回答確定直後に表示される正誤の演出（オーバーレイ表示 + キャラクターリアクション）。約1.3秒間表示される |
| 備考 | 解説はここでは表示しない。リザルト画面でまとめて表示する |

### リザルト（Result）

| 項目 | 内容 |
| --- | --- |
| 日本語 | リザルト |
| 定義 | 全問回答後に表示される結果画面。正解数・正答率・全問の振り返り（解説含む）を表示する |

### キャラクター（Character）

| 項目 | 内容 |
| --- | --- |
| 日本語 | キャラクター |
| 英語（コード） | `Character` |
| 定義 | プレイ画面・リザルト画面に常時表示される感情リアクションキャラクター |
| 備考 | 状態（`CharacterState`）に応じて表情が変わる |

### キャラクター状態（CharacterState）

| 項目 | 内容 |
| --- | --- |
| 日本語 | キャラクター状態 |
| 英語（コード） | `CharacterState` |
| 定義 | キャラクターの表情を決定する状態を表す型 |

| 値 | 表示タイミング | 意味 |
| --- | --- | --- |
| `idle` | 待機中・ドラッグなし | 穏やかな笑顔 |
| `thinking` | ドラッグ操作中 | ハラハラした表情 |
| `correct` | 正解フィードバック中 | 大喜び |
| `incorrect` | 不正解フィードバック中 | ガックリ |
| `perfect` | リザルト・正答率100% | 特別な喜び |
| `low_score` | リザルト・正答率39%以下 | 落ち込み |

### 選択肢ラベル（ChoiceIndicator）

| 項目 | 内容 |
| --- | --- |
| 日本語 | 選択肢ラベル |
| 英語（コード） | `ChoiceIndicator` |
| 定義 | プレイ画面のカード左右に表示される選択肢のテキスト。ドラッグ量に応じて強調表示される |

---

## ビジネス用語

### プレイヤー（Player）

| 項目 | 内容 |
| --- | --- |
| 日本語 | プレイヤー |
| 定義 | クイズをプレイするユーザー |

### 管理者（Admin）

| 項目 | 内容 |
| --- | --- |
| 日本語 | 管理者 |
| 定義 | クイズ・セットを作成・管理するユーザー |
| 備考 | MVP段階では認証なし。同一ブラウザのユーザーが兼任する想定 |

### プレイセッション（Play Session）

| 項目 | 内容 |
| --- | --- |
| 日本語 | プレイセッション |
| 定義 | セット選択からリザルト表示までの1回のプレイ区間 |
| 備考 | セッション中の回答記録（`AnswerRecord[]`）はsessionStorageに一時保存し、リザルト画面で読み込む |

### 正答率（Score Rate）

| 項目 | 内容 |
| --- | --- |
| 日本語 | 正答率 |
| 定義 | 正解数 ÷ 総問題数 × 100（%）。リザルト画面に表示し、キャラクター表情の判定にも使用する |

---

## 英語・日本語対応表

| 英語（コード） | 日本語 | 補足 |
| --- | --- | --- |
| `Quiz` | クイズ | 1問の問題 |
| `QuizSet` / `set` | クイズセット / セット | 複数問題のグループ |
| `optionA` / `optionB` | 選択肢A / 選択肢B | 2択の回答候補 |
| `correctAnswer` | 正解 | `'A'` または `'B'` |
| `explanation` | 解説 | 任意・リザルトで表示 |
| `AnswerRecord` | 回答記録 | 1問分の回答結果 |
| `selectedAnswer` | 選んだ回答 | プレイヤーが選択した選択肢 |
| `isCorrect` | 正誤 | 正解かどうかのフラグ |
| `CharacterState` | キャラクター状態 | 表情を決定する状態 |
| `SwipeState` | スワイプ状態 | `Idle` / `Dragging` / `Feedback` |
| `swipeThreshold` | スワイプ閾値 | 回答確定に必要なドラッグ距離 |
| `CardStack` | カードスタック | 重なったカード表示 |
| `ChoiceIndicator` | 選択肢ラベル | カード左右の選択肢テキスト |
| `result` | リザルト | 全問終了後の結果画面 |
| `feedback` | フィードバック | 回答直後の正誤演出 |
| `admin` | 管理画面 | クイズ管理用画面 |
| `seed` | サンプルデータ | 初回起動時の投入データ |
